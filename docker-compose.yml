version: "3.7"
services:
    wake-up-computer:
        build:
            context: src
            dockerfile: WakeUpComputer/Dockerfile
        # network_mode: "host" # doesn't work on Windows (https://docs.docker.com/network/host/)
        ports:
            - 3000:3000
        environment:
            ASPNETCORE_ENVIRONMENT: Development
            ASPNETCORE_URLS: "http://*:3000"
    sokrates:
        build:
            context: src/Sokrates
            dockerfile: Dockerfile
        # network_mode: "host" # doesn't work on Windows (https://docs.docker.com/network/host/)
        ports:
            - 3001:3001
        volumes:
            - ${SOKRATES_CLIENT_CERTIFICATE_PATH}:/data/client-certificate.pfx
        environment:
            CLIENT_CERTIFICATE_PATH: /data/client-certificate.pfx
            CLIENT_CERTIFICATE_PASSPHRASE: ${SOKRATES_CLIENT_CERTIFICATE_PASSPHRASE}
            PORT: 3001
